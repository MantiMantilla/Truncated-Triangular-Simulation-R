<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Truncated Triangular Distribution | Simulating the Truncated Triangular Distribution</title>
  <meta name="description" content="THis documentation pertains to the implementation of a Monte Carlo simulation script written in base R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Truncated Triangular Distribution | Simulating the Truncated Triangular Distribution" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="THis documentation pertains to the implementation of a Monte Carlo simulation script written in base R." />
  <meta name="github-repo" content="MantiMantilla/Truncated-Triangular-Simulation-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Truncated Triangular Distribution | Simulating the Truncated Triangular Distribution" />
  
  <meta name="twitter:description" content="THis documentation pertains to the implementation of a Monte Carlo simulation script written in base R." />
  

<meta name="author" content="Alejandro Mantilla" />


<meta name="date" content="2021-01-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="triangular-distribution.html"/>
<link rel="next" href="simulation-and-validation-.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#your-own-flare"><i class="fa fa-check"></i><b>1.2</b> Your own flare</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#project-home"><i class="fa fa-check"></i><b>1.3</b> Project home</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>1.4</b> Disclaimer</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>1.5</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#author"><i class="fa fa-check"></i><b>1.6</b> Author</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i><b>1.7</b> License</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="triangular-distribution.html"><a href="triangular-distribution.html"><i class="fa fa-check"></i><b>2</b> Triangular Distribution</a>
<ul>
<li class="chapter" data-level="2.1" data-path="triangular-distribution.html"><a href="triangular-distribution.html#distributions"><i class="fa fa-check"></i><b>2.1</b> Distributions</a></li>
<li class="chapter" data-level="2.2" data-path="triangular-distribution.html"><a href="triangular-distribution.html#triangular-pdf"><i class="fa fa-check"></i><b>2.2</b> Triangular PDF</a></li>
<li class="chapter" data-level="2.3" data-path="triangular-distribution.html"><a href="triangular-distribution.html#triangular-cdf"><i class="fa fa-check"></i><b>2.3</b> Triangular CDF</a></li>
<li class="chapter" data-level="2.4" data-path="triangular-distribution.html"><a href="triangular-distribution.html#inverse-triangular-cdf"><i class="fa fa-check"></i><b>2.4</b> Inverse Triangular CDF</a></li>
<li class="chapter" data-level="2.5" data-path="triangular-distribution.html"><a href="triangular-distribution.html#measures-of-central-tendency-and-spread"><i class="fa fa-check"></i><b>2.5</b> Measures of Central Tendency and Spread</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="triangular-distribution.html"><a href="triangular-distribution.html#mean"><i class="fa fa-check"></i><b>2.5.1</b> Mean</a></li>
<li class="chapter" data-level="2.5.2" data-path="triangular-distribution.html"><a href="triangular-distribution.html#median"><i class="fa fa-check"></i><b>2.5.2</b> Median</a></li>
<li class="chapter" data-level="2.5.3" data-path="triangular-distribution.html"><a href="triangular-distribution.html#mode"><i class="fa fa-check"></i><b>2.5.3</b> Mode</a></li>
<li class="chapter" data-level="2.5.4" data-path="triangular-distribution.html"><a href="triangular-distribution.html#variance"><i class="fa fa-check"></i><b>2.5.4</b> Variance</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="triangular-distribution.html"><a href="triangular-distribution.html#an-object-to-hold-these-properties"><i class="fa fa-check"></i><b>2.6</b> An Object to Hold These Properties</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html"><i class="fa fa-check"></i><b>3</b> Truncated Triangular Distribution</a>
<ul>
<li class="chapter" data-level="3.1" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#truncated-distribution"><i class="fa fa-check"></i><b>3.1</b> Truncated Distribution</a></li>
<li class="chapter" data-level="3.2" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#truncated-triangular-pdf"><i class="fa fa-check"></i><b>3.2</b> Truncated Triangular PDF</a></li>
<li class="chapter" data-level="3.3" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#truncated-triangular-cdf"><i class="fa fa-check"></i><b>3.3</b> Truncated Triangular CDF</a></li>
<li class="chapter" data-level="3.4" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#inverse-truncated-triangular-cdf"><i class="fa fa-check"></i><b>3.4</b> Inverse Truncated Triangular CDF</a></li>
<li class="chapter" data-level="3.5" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#measures-of-central-tendency-and-spread-1"><i class="fa fa-check"></i><b>3.5</b> Measures of Central Tendency and Spread</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#mean-1"><i class="fa fa-check"></i><b>3.5.1</b> Mean</a></li>
<li class="chapter" data-level="3.5.2" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#median-1"><i class="fa fa-check"></i><b>3.5.2</b> Median</a></li>
<li class="chapter" data-level="3.5.3" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#mode-1"><i class="fa fa-check"></i><b>3.5.3</b> Mode</a></li>
<li class="chapter" data-level="3.5.4" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#variance-1"><i class="fa fa-check"></i><b>3.5.4</b> Variance</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="truncated-triangular-distribution.html"><a href="truncated-triangular-distribution.html#an-object-to-hold-these-properties-1"><i class="fa fa-check"></i><b>3.6</b> An Object to Hold These Properties</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="simulation-and-validation-.html"><a href="simulation-and-validation-.html"><i class="fa fa-check"></i><b>4</b> Simulation and Validation.</a>
<ul>
<li class="chapter" data-level="4.1" data-path="simulation-and-validation-.html"><a href="simulation-and-validation-.html#r-markdown"><i class="fa fa-check"></i><b>4.1</b> R Markdown</a></li>
<li class="chapter" data-level="4.2" data-path="simulation-and-validation-.html"><a href="simulation-and-validation-.html#including-plots"><i class="fa fa-check"></i><b>4.2</b> Including Plots</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Simulating the Truncated Triangular Distribution</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="truncated-triangular-distribution" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Truncated Triangular Distribution</h1>
<div id="truncated-distribution" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Truncated Distribution</h2>
<p>A truncated distribution, simply put, is a distribution derived from another such that it’s domain is restricted to some interval <span class="math inline">\((a,b]\)</span>. The function itself might not change but because we require the area under the PDF to be equal to 1, a transformation is due. One of the strengths of this distribution lies in the fact that most of it properties can be calculated from methods already implemented in the underlying distribution, meaning that the functions and values need not be derived analytically and so it’s implementation is easily generalized.</p>
</div>
<div id="truncated-triangular-pdf" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Truncated Triangular PDF</h2>
<p>Since we’re handling more than one distribution, let’s distinguish them symbolically.</p>
<blockquote>
<p>Let <span class="math inline">\(Y\sim f(y) = Triangular(L, U, M)\)</span> and <span class="math inline">\(X\sim f(x|a &lt; X \leq b) = h(x)\)</span></p>
</blockquote>
<p>The truncated distribution has the following PDF, regardless of the underlying distribution.</p>
<p><span class="math display">\[
  h(x)=
  \begin{cases}
    \frac{f(x)}{F(b)-F(a)}\quad&amp;(a&lt; x\leq b)\\
    0\quad&amp;(x\ \notin\ ]a,b])\\
  \end{cases}
\]</span></p>
<p>Multiplying the original distribution’s PDF by a factor of <span class="math inline">\(\frac{1}{F(b)-F(a)}\)</span> just scales it so the area removed by truncating the domain gets compensated for. Because we can already account for <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(F(x)\)</span> in our original implementation of the triangular distribution, there is no need to analyticaly derive the new PDF. Let’s store an instance of the triangular distribution list in a variable and call it’s functions and values on demand.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="truncated-triangular-distribution.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Create a list that contains the major properties of a triangular distribution with L = 2, U = 9, and M = 7</span></span>
<span id="cb8-2"><a href="truncated-triangular-distribution.html#cb8-2" aria-hidden="true" tabindex="-1"></a>triangular.distribution <span class="ot">&lt;-</span> <span class="fu">generate.triangular</span>(<span class="at">L =</span> <span class="dv">2</span>, <span class="at">U =</span> <span class="dv">9</span>, <span class="at">M =</span> <span class="dv">7</span>)</span></code></pre></div>
<p>We will use this triangular as the distribution to truncate</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="truncated-triangular-distribution.html#cb9-1" aria-hidden="true" tabindex="-1"></a>truncated.distribution <span class="ot">&lt;-</span> <span class="cf">function</span>(x, a, b) {</span>
<span id="cb9-2"><a href="truncated-triangular-distribution.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (a <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> b) {</span>
<span id="cb9-3"><a href="truncated-triangular-distribution.html#cb9-3" aria-hidden="true" tabindex="-1"></a>    pdf.g <span class="ot">&lt;-</span> triangular.distribution<span class="sc">$</span>pdf</span>
<span id="cb9-4"><a href="truncated-triangular-distribution.html#cb9-4" aria-hidden="true" tabindex="-1"></a>    cumul.F <span class="ot">&lt;-</span> triangular.distribution<span class="sc">$</span>cdf</span>
<span id="cb9-5"><a href="truncated-triangular-distribution.html#cb9-5" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="fu">pdf.g</span>(x) <span class="sc">/</span> (<span class="fu">cumul.F</span>(b) <span class="sc">-</span> <span class="fu">cumul.F</span>(a))</span>
<span id="cb9-6"><a href="truncated-triangular-distribution.html#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb9-7"><a href="truncated-triangular-distribution.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb9-8"><a href="truncated-triangular-distribution.html#cb9-8" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb9-9"><a href="truncated-triangular-distribution.html#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb9-10"><a href="truncated-triangular-distribution.html#cb9-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-11"><a href="truncated-triangular-distribution.html#cb9-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This function takes some <code>x</code> and evaluates the truncated triangular PDF defined in the <code>triangular.distribution</code> variable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="truncated-triangular-distribution.html#cb10-1" aria-hidden="true" tabindex="-1"></a>truncated.distribution.vectorized <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb10-2"><a href="truncated-triangular-distribution.html#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sapply</span>(x, truncated.distribution, ...)</span>
<span id="cb10-3"><a href="truncated-triangular-distribution.html#cb10-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Because of the nature of the <code>plot.function()</code> method, we must make our function compatible with vectors, meaning that passing a vector as its <code>x</code> parameter would apply the function to every element in it. Notice the <code>...</code>. This just means that any subsequent parameters get passed to the underlying <code>truncated.distribution()</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="truncated-triangular-distribution.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb11-2"><a href="truncated-triangular-distribution.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">truncated.distribution.vectorized</span>(x, <span class="dv">2</span>, <span class="dv">9</span>)},</span>
<span id="cb11-3"><a href="truncated-triangular-distribution.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">2</span>,</span>
<span id="cb11-4"><a href="truncated-triangular-distribution.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">9</span>,</span>
<span id="cb11-5"><a href="truncated-triangular-distribution.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Truncated Triangular Distributions&quot;</span>,</span>
<span id="cb11-6"><a href="truncated-triangular-distribution.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">&quot;f(x)&quot;</span>,</span>
<span id="cb11-7"><a href="truncated-triangular-distribution.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb11-8"><a href="truncated-triangular-distribution.html#cb11-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-9"><a href="truncated-triangular-distribution.html#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="truncated-triangular-distribution.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Additional plots get included in the first rather than into a new canvas</span></span>
<span id="cb11-11"><a href="truncated-triangular-distribution.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="do">## when the `add` parameter is set to TRUE.</span></span>
<span id="cb11-12"><a href="truncated-triangular-distribution.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb11-13"><a href="truncated-triangular-distribution.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">truncated.distribution.vectorized</span>(x, <span class="dv">3</span>, <span class="dv">8</span>)},</span>
<span id="cb11-14"><a href="truncated-triangular-distribution.html#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">2</span>,</span>
<span id="cb11-15"><a href="truncated-triangular-distribution.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">9</span>,</span>
<span id="cb11-16"><a href="truncated-triangular-distribution.html#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb11-17"><a href="truncated-triangular-distribution.html#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">add =</span> <span class="cn">TRUE</span></span>
<span id="cb11-18"><a href="truncated-triangular-distribution.html#cb11-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-19"><a href="truncated-triangular-distribution.html#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="truncated-triangular-distribution.html#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb11-21"><a href="truncated-triangular-distribution.html#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">truncated.distribution.vectorized</span>(x, <span class="dv">4</span>, <span class="dv">7</span>)},</span>
<span id="cb11-22"><a href="truncated-triangular-distribution.html#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">2</span>,</span>
<span id="cb11-23"><a href="truncated-triangular-distribution.html#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">9</span>,</span>
<span id="cb11-24"><a href="truncated-triangular-distribution.html#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb11-25"><a href="truncated-triangular-distribution.html#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">add =</span> <span class="cn">TRUE</span></span>
<span id="cb11-26"><a href="truncated-triangular-distribution.html#cb11-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-27"><a href="truncated-triangular-distribution.html#cb11-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-28"><a href="truncated-triangular-distribution.html#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Let&#39;s also include a legend so we can distinguish all three distributions.</span></span>
<span id="cb11-29"><a href="truncated-triangular-distribution.html#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb11-30"><a href="truncated-triangular-distribution.html#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">2</span>,</span>
<span id="cb11-31"><a href="truncated-triangular-distribution.html#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fl">0.5</span>,</span>
<span id="cb11-32"><a href="truncated-triangular-distribution.html#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;f(x|2 &lt; x &lt;= 9)&quot;</span>, <span class="st">&quot;f(x|3 &lt; x &lt;= 8)&quot;</span>, <span class="st">&quot;f(x|4 &lt; x &lt;= 7)&quot;</span>),</span>
<span id="cb11-33"><a href="truncated-triangular-distribution.html#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb11-34"><a href="truncated-triangular-distribution.html#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">lty =</span> <span class="dv">1</span></span>
<span id="cb11-35"><a href="truncated-triangular-distribution.html#cb11-35" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="_main_files/figure-html/truncated%20plots-1.png" width="672" /></p>
<p>Notice how our distributions get scaled up further as the new domain becomes narrower. The black distribution faces no changes because cutting it’s domain to <span class="math inline">\(a=2\)</span> and <span class="math inline">\(b=9\)</span> makes no difference, and so the triangular distribution remains.</p>
</div>
<div id="truncated-triangular-cdf" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Truncated Triangular CDF</h2>
<p>The CDF is quite straight forward to understand. Because the PDF of the runcated triangular is the same as the original only restricted in its domain and scaled by a constant factor of <span class="math inline">\(\frac{1}{F(b)-F(a)}\)</span>, all we really need to falculate <span class="math inline">\(H(x)\)</span> is to calculate <span class="math inline">\(F(x)\)</span>, subtract the portion now unaccounted for by the restrictions to the domain (<span class="math inline">\(F(a)\)</span>), and scale by the same factor as the PDF.</p>
<p><span class="math display">\[
  H(x) = 
  \begin{cases}
    0 \quad&amp; x\leq a\\
    \frac{F(x)-F(a)}{F(b)-F(a)} \quad&amp; a &lt; x \leq b\\
    1 \quad&amp; b &lt; x
  \end{cases}
\]</span></p>
<p>Again, the implementation of the triangular distribution already considers a function to calculate the triangular CDF, meaning that there is no need to analyticaly derive the equation. It’s good enough to call the CDF directly.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="truncated-triangular-distribution.html#cb12-1" aria-hidden="true" tabindex="-1"></a>cumulative.truncated.distribution <span class="ot">&lt;-</span> <span class="cf">function</span>(x, a, b) {</span>
<span id="cb12-2"><a href="truncated-triangular-distribution.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&lt;=</span> a) {</span>
<span id="cb12-3"><a href="truncated-triangular-distribution.html#cb12-3" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb12-4"><a href="truncated-triangular-distribution.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> b) {</span>
<span id="cb12-5"><a href="truncated-triangular-distribution.html#cb12-5" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> (triangular.distribution<span class="sc">$</span><span class="fu">cdf</span>(x) <span class="sc">-</span> triangular.distribution<span class="sc">$</span><span class="fu">cdf</span>(a)) <span class="sc">/</span> (triangular.distribution<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> triangular.distribution<span class="sc">$</span><span class="fu">cdf</span>(a))</span>
<span id="cb12-6"><a href="truncated-triangular-distribution.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> b){</span>
<span id="cb12-7"><a href="truncated-triangular-distribution.html#cb12-7" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb12-8"><a href="truncated-triangular-distribution.html#cb12-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-9"><a href="truncated-triangular-distribution.html#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb12-10"><a href="truncated-triangular-distribution.html#cb12-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-11"><a href="truncated-triangular-distribution.html#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="truncated-triangular-distribution.html#cb12-12" aria-hidden="true" tabindex="-1"></a>cumulative.truncated.distribution.vectorized <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb12-13"><a href="truncated-triangular-distribution.html#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sapply</span>(x, cumulative.truncated.distribution, ...)</span>
<span id="cb12-14"><a href="truncated-triangular-distribution.html#cb12-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The code for the plots also shouldn’t change much. No change has been made to the parameters of each distribution.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="truncated-triangular-distribution.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb13-2"><a href="truncated-triangular-distribution.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">cumulative.truncated.distribution.vectorized</span>(x, <span class="dv">2</span>, <span class="dv">9</span>)},</span>
<span id="cb13-3"><a href="truncated-triangular-distribution.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">0</span>,</span>
<span id="cb13-4"><a href="truncated-triangular-distribution.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">10</span>,</span>
<span id="cb13-5"><a href="truncated-triangular-distribution.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Cumulative Truncated Triangular Distributions&quot;</span>,</span>
<span id="cb13-6"><a href="truncated-triangular-distribution.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">&quot;F(x)&quot;</span>,</span>
<span id="cb13-7"><a href="truncated-triangular-distribution.html#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb13-8"><a href="truncated-triangular-distribution.html#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="truncated-triangular-distribution.html#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="truncated-triangular-distribution.html#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb13-11"><a href="truncated-triangular-distribution.html#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">cumulative.truncated.distribution.vectorized</span>(x, <span class="dv">3</span>, <span class="dv">8</span>)},</span>
<span id="cb13-12"><a href="truncated-triangular-distribution.html#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">0</span>,</span>
<span id="cb13-13"><a href="truncated-triangular-distribution.html#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">10</span>,</span>
<span id="cb13-14"><a href="truncated-triangular-distribution.html#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb13-15"><a href="truncated-triangular-distribution.html#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">add =</span> <span class="cn">TRUE</span></span>
<span id="cb13-16"><a href="truncated-triangular-distribution.html#cb13-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-17"><a href="truncated-triangular-distribution.html#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="truncated-triangular-distribution.html#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.function</span>(</span>
<span id="cb13-19"><a href="truncated-triangular-distribution.html#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {<span class="fu">cumulative.truncated.distribution.vectorized</span>(x, <span class="dv">4</span>, <span class="dv">7</span>)},</span>
<span id="cb13-20"><a href="truncated-triangular-distribution.html#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="dv">0</span>,</span>
<span id="cb13-21"><a href="truncated-triangular-distribution.html#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="dv">10</span>,</span>
<span id="cb13-22"><a href="truncated-triangular-distribution.html#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb13-23"><a href="truncated-triangular-distribution.html#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">add =</span> <span class="cn">TRUE</span></span>
<span id="cb13-24"><a href="truncated-triangular-distribution.html#cb13-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-25"><a href="truncated-triangular-distribution.html#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="truncated-triangular-distribution.html#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb13-27"><a href="truncated-triangular-distribution.html#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">0</span>,</span>
<span id="cb13-28"><a href="truncated-triangular-distribution.html#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">1</span>,</span>
<span id="cb13-29"><a href="truncated-triangular-distribution.html#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;F(x|2 &lt; x &lt;= 9)&quot;</span>, <span class="st">&quot;F(x|3 &lt; x &lt;= 8)&quot;</span>, <span class="st">&quot;F(x|4 &lt; x &lt;= 7)&quot;</span>),</span>
<span id="cb13-30"><a href="truncated-triangular-distribution.html#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb13-31"><a href="truncated-triangular-distribution.html#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">lty =</span> <span class="dv">1</span></span>
<span id="cb13-32"><a href="truncated-triangular-distribution.html#cb13-32" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="_main_files/figure-html/truncated%20cdf%20plots-1.png" width="672" /></p>
<p>Notice how the cumulative distribution approaches one very quickly. This makes sense considering that, because of the bounds of the domain of the triangular distribution, <span class="math inline">\(X\)</span> is guaranteed to be smaller than <span class="math inline">\(U\)</span>, at which point the probability is one.</p>
</div>
<div id="inverse-truncated-triangular-cdf" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Inverse Truncated Triangular CDF</h2>
<p>What if we already had a probability in mind but wanted to find the matching <span class="math inline">\(x\)</span>? Well, in that case, we would need to calculate an inverse CDF. Given some probability <span class="math inline">\(p\)</span>, what <span class="math inline">\(x\)</span> delimits <span class="math inline">\(X\)</span> such that <span class="math inline">\(p\)</span> is <span class="math inline">\(P(X\leq x)\)</span>.</p>
<p>Or in other words, find <span class="math inline">\(g\)</span> such that:</p>
<p><span class="math display">\[
  g(p) = F^{-1}(p) = F^{-1}(F(x)) = x
\]</span></p>
<p>Explicitly, we really just need to solve for <span class="math inline">\(x\)</span> in the following equation.</p>
<p><span class="math display">\[
  H(x)=\frac{F(x)-F(a)}{F(b)-F(a)}=p
\]</span></p>
<p>The resulting expression will be in terms of a probability <span class="math inline">\(p\)</span>.</p>
<p><span class="math display">\[
  H^{-1}(p) = F^{-1}\left(p(F(b)-F(a)) + F(a)\right)
\]</span></p>
<p>Remember how our <code>triangular.distribution</code> object has <code>cdf()</code> and <code>inverse.cdf()</code> methods, meaning the inverse cdf of the truncated triangular distribution can also be computed from the implementation of the base distribution.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="truncated-triangular-distribution.html#cb14-1" aria-hidden="true" tabindex="-1"></a>inverse.cumulative.truncated.distribution <span class="ot">&lt;-</span> <span class="cf">function</span>(p, a, b) {</span>
<span id="cb14-2"><a href="truncated-triangular-distribution.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> tringular.distribution<span class="sc">$</span><span class="fu">inverse.cdf</span>(</span>
<span id="cb14-3"><a href="truncated-triangular-distribution.html#cb14-3" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">*</span> (tringular.distribution<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> tringular.distribution<span class="sc">$</span><span class="fu">cdf</span>(a))</span>
<span id="cb14-4"><a href="truncated-triangular-distribution.html#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">+</span> tringular.distribution<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb14-5"><a href="truncated-triangular-distribution.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-6"><a href="truncated-triangular-distribution.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb14-7"><a href="truncated-triangular-distribution.html#cb14-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>No plots for this one considering how it just mirrors the regular CDF over the <span class="math inline">\(y=x\)</span> line. Do consider, this distribution is only defined for <span class="math inline">\(p\in[0,1]\)</span>. Some error handling could benefit your code’s reliability.</p>
</div>
<div id="measures-of-central-tendency-and-spread-1" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Measures of Central Tendency and Spread</h2>
<p>We do come across a challenge when trying to figure out expressions for these statistics. First we must derive their expression analytically because they can’t be expressed just in terms of what we have already implemented in the triangular distribution (We must evaluate definite integrals); second, because these definite integral explicitly make use of the underlying triangular distribution, they can’t be generalised to the whole family of truncated distributions; and finally, the triangular distribution is a piecewise function, meaning the procedure to derive an expression must be done on a case by case basis.</p>
<div id="mean-1" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Mean</h3>
<p>The expected value of a random variable <span class="math inline">\(X\)</span>.</p>
<p><span class="math display">\[
  E(X) = \int_{-\infty}^{\infty}xh(x)dx = \int_{a}^{b}x\cdot\frac{f(x)}{F(b)-F(a)}dx= \frac{\int_{a}^{b}xf(x)dx}{F(b)-F(a)}
\]</span>
Case 1 (<span class="math inline">\(L \leq a \leq b &lt; M\)</span>):</p>
<p><span class="math display">\[
  E(X)=\frac{\int_{a}^{b} x \cdot \frac{2(x-L)}{(U-L)(M-L)} dx}{F(b)-F(a)}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{2\left( b^{3} - a^{3} - 3L\left( \frac{b^{2}}{2} - \frac{a^{2}}{2} \right) \right)}{3(U-L)(M-L)}}{F(b)-F(a)}
\]</span></p>
<p>Case 2 (<span class="math inline">\(L \leq a &lt; M \leq b \leq U\)</span>):</p>
<p><span class="math display">\[
  E(X)=\frac{\int_{a}^{M} x \cdot \frac{2(x-L)}{(U-L)(M-L)} dx + \int_{M}^{b} x \cdot \frac{2(U-x)}{(U-L)(U-M)} dx}{F(b)-F(a)}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{-M^3U-2a^3U+3La^2U+3Mb^2U-3Lb^2U+LM^3+2Ma^3-3LMa^2-2Mb^3+2Lb^3}{3(U-L)(M-L)(U-M)}}{F(b)-F(a)}
\]</span></p>
<p>Case 3 (<span class="math inline">\(M \leq a \leq b \leq U\)</span>):</p>
<p><span class="math display">\[
  E(X)=\frac{\int_{M}^{b} x \cdot \frac{2(U-x)}{(U-L)(U-M)} dx}{F(b)-F(a)}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{3b^2U-3M^2U-2b^3+2M^3}{3\left(-L+U\right)\left(U-M\right)}}{F(b)-F(a)}
\]</span></p>
</div>
<div id="median-1" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Median</h3>
<p>Value <span class="math inline">\(x\)</span> such that the probability that a random variable <span class="math inline">\(X\)</span> be smaller is 0.5.</p>
<p><span class="math display">\[
  \text{Median(X)} = H^{-1}(0.5)
\]</span></p>
<p>This one is straight forward. We already implemented the inverse CDF.</p>
</div>
<div id="mode-1" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Mode</h3>
<p>Value of a random variable <span class="math inline">\(X\)</span> for which <span class="math inline">\(f(x)\)</span> is at its maximum. Once again, we rely on the cases and calculate the mode according to where the bounds of the truncated fall.</p>
<p><span class="math display">\[
  \text{Mode(X)} =
  \begin{cases}
    b \quad&amp; (L \leq a \leq b &lt; M)\\
    M \quad&amp; (L \leq a &lt; M \leq b \leq U)\\
    a \quad&amp; (M \leq a \leq b \leq U)
  \end{cases}
\]</span></p>
</div>
<div id="variance-1" class="section level3" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Variance</h3>
<p>Measure of spread of the distribution with respect to the mean.</p>
<p><span class="math display">\[
  \text{Var(X)} = \int_{-\infty}^{\infty}x^{2}h(x)dx - E(X)^{2} = \int_{a}^{b}x^{2}\cdot\frac{f(x)}{F(b)-F(a)}dx - E(X)^{2} = \frac{\int_{a}^{b}x^{2}f(x)dx}{F(b)-F(a)} - E(X)^{2}
\]</span></p>
<p>Case 1 (<span class="math inline">\(L \leq a \leq b &lt; M\)</span>):</p>
<p><span class="math display">\[
  \text{Var}(X)=\frac{\int_{a}^{b} x^{2} \cdot \frac{2(x-L)}{(U-L)(M-L)} dx}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{-4L\left(\frac{b^3}{3}-\frac{a^3}{3}\right)+b^4-a^4}{2\left(U-L\right)\left(M-L\right)}}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
<p>Case 2 (<span class="math inline">\(L \leq a &lt; M \leq b \leq U\)</span>):</p>
<p><span class="math display">\[
  \text{Var}(X)=\frac{\int_{a}^{M} x^{2} \cdot \frac{2(x-L)}{(U-L)(M-L)} dx + \int_{M}^{b} x^{2} \cdot \frac{2(U-x)}{(U-L)(U-M)} dx}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{-M^4U-3a^4U+4La^3U+4Mb^3U-4Lb^3U+LM^4+3Ma^4-4LMa^3-3Mb^4+3Lb^4}{6\left(U-L\right)\left(M-L\right)\left(U-M\right)}}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
<p>Case 3 (<span class="math inline">\(M \leq a \leq b \leq U\)</span>):</p>
<p><span class="math display">\[
  \text{Var}(X)=\frac{\int_{M}^{b} x^{2} \cdot \frac{2(U-x)}{(U-L)(U-M)} dx}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
<p><span class="math display">\[
  = \frac{\frac{4b^3U-4M^3U-3b^4+3M^4}{6\left(U-L\right)\left(U-M\right)}}{F(b)-F(a)}-E(X)^{2}
\]</span></p>
</div>
</div>
<div id="an-object-to-hold-these-properties-1" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> An Object to Hold These Properties</h2>
<p>Knowing how to compute these quintessential properties of the truncated trinagular distribution, it would make sense to build them into an object to be called on demand. Luckily, all we need is a constructor function that implements these procedures and computations and returns them in a variable that can hold multiple items of different class (a list). Consider the following constructor function that, when called, stores all explored functions and values into a list and returns it. Notice how this function takes a triangular distribution object for its third parameter. The reason for this is self evident but if you’ve skipped up until this point, know that the truncated distribution is the transformation of some other distribution.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="truncated-triangular-distribution.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Returns a function that returns a list with each of its elements defined as functions or vectors of one</span></span>
<span id="cb15-2"><a href="truncated-triangular-distribution.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="do">## element that describe aspects of a truncated triangular distribution</span></span>
<span id="cb15-3"><a href="truncated-triangular-distribution.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="do">## (pdf, cdf, inverse cdf, mean, median, mode, upper bound, lower bound, variance).</span></span>
<span id="cb15-4"><a href="truncated-triangular-distribution.html#cb15-4" aria-hidden="true" tabindex="-1"></a>generate.truncated.triangular <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b, orig.tri.dist) {</span>
<span id="cb15-5"><a href="truncated-triangular-distribution.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-6"><a href="truncated-triangular-distribution.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Original parameters of the triangular distribution</span></span>
<span id="cb15-7"><a href="truncated-triangular-distribution.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  M <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>tri.mode</span>
<span id="cb15-8"><a href="truncated-triangular-distribution.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  L <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>tri.lower</span>
<span id="cb15-9"><a href="truncated-triangular-distribution.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  U <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>tri.upper</span>
<span id="cb15-10"><a href="truncated-triangular-distribution.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-11"><a href="truncated-triangular-distribution.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Throw an error if the new bounds do not fall witin the old bounds of the triangular pdf.</span></span>
<span id="cb15-12"><a href="truncated-triangular-distribution.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (a <span class="sc">&lt;</span> L <span class="sc">|</span> b <span class="sc">&gt;</span> U) {</span>
<span id="cb15-13"><a href="truncated-triangular-distribution.html#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;The new bounds of the pdf do not fall within the original range&quot;</span>)</span>
<span id="cb15-14"><a href="truncated-triangular-distribution.html#cb15-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-15"><a href="truncated-triangular-distribution.html#cb15-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-16"><a href="truncated-triangular-distribution.html#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a function that returns the pdf of the truncated triangular, given some x.</span></span>
<span id="cb15-17"><a href="truncated-triangular-distribution.html#cb15-17" aria-hidden="true" tabindex="-1"></a>  pdf <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb15-18"><a href="truncated-triangular-distribution.html#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (a <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> b) {</span>
<span id="cb15-19"><a href="truncated-triangular-distribution.html#cb15-19" aria-hidden="true" tabindex="-1"></a>      pdf.g <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>pdf</span>
<span id="cb15-20"><a href="truncated-triangular-distribution.html#cb15-20" aria-hidden="true" tabindex="-1"></a>      cumul.F <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>cdf</span>
<span id="cb15-21"><a href="truncated-triangular-distribution.html#cb15-21" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">pdf.g</span>(x) <span class="sc">/</span> (<span class="fu">cumul.F</span>(b) <span class="sc">-</span> <span class="fu">cumul.F</span>(a))</span>
<span id="cb15-22"><a href="truncated-triangular-distribution.html#cb15-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(result)</span>
<span id="cb15-23"><a href="truncated-triangular-distribution.html#cb15-23" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb15-24"><a href="truncated-triangular-distribution.html#cb15-24" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb15-25"><a href="truncated-triangular-distribution.html#cb15-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(result)</span>
<span id="cb15-26"><a href="truncated-triangular-distribution.html#cb15-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-27"><a href="truncated-triangular-distribution.html#cb15-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-28"><a href="truncated-triangular-distribution.html#cb15-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-29"><a href="truncated-triangular-distribution.html#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a function that returns the cdf of the truncated triangular, given some x.</span></span>
<span id="cb15-30"><a href="truncated-triangular-distribution.html#cb15-30" aria-hidden="true" tabindex="-1"></a>  cdf <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb15-31"><a href="truncated-triangular-distribution.html#cb15-31" aria-hidden="true" tabindex="-1"></a>    cumul.F <span class="ot">&lt;-</span> orig.tri.dist<span class="sc">$</span>cdf</span>
<span id="cb15-32"><a href="truncated-triangular-distribution.html#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="sc">&lt;=</span> a) {</span>
<span id="cb15-33"><a href="truncated-triangular-distribution.html#cb15-33" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb15-34"><a href="truncated-triangular-distribution.html#cb15-34" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> b) {</span>
<span id="cb15-35"><a href="truncated-triangular-distribution.html#cb15-35" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> (<span class="fu">cumul.F</span>(x) <span class="sc">-</span> <span class="fu">cumul.F</span>(a)) <span class="sc">/</span> (<span class="fu">cumul.F</span>(b) <span class="sc">-</span> <span class="fu">cumul.F</span>(a))</span>
<span id="cb15-36"><a href="truncated-triangular-distribution.html#cb15-36" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (b <span class="sc">&lt;</span> x) {</span>
<span id="cb15-37"><a href="truncated-triangular-distribution.html#cb15-37" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb15-38"><a href="truncated-triangular-distribution.html#cb15-38" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-39"><a href="truncated-triangular-distribution.html#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb15-40"><a href="truncated-triangular-distribution.html#cb15-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-41"><a href="truncated-triangular-distribution.html#cb15-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-42"><a href="truncated-triangular-distribution.html#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a function that returns the inverse cdf of the truncated triangular, given some probability p.</span></span>
<span id="cb15-43"><a href="truncated-triangular-distribution.html#cb15-43" aria-hidden="true" tabindex="-1"></a>  inverse.cdf <span class="ot">&lt;-</span> <span class="cf">function</span>(p) {</span>
<span id="cb15-44"><a href="truncated-triangular-distribution.html#cb15-44" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span></span>
<span id="cb15-45"><a href="truncated-triangular-distribution.html#cb15-45" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">inverse.cdf</span>(p <span class="sc">*</span> (orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)) <span class="sc">+</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a))</span>
<span id="cb15-46"><a href="truncated-triangular-distribution.html#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb15-47"><a href="truncated-triangular-distribution.html#cb15-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-48"><a href="truncated-triangular-distribution.html#cb15-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-49"><a href="truncated-triangular-distribution.html#cb15-49" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the mean of the distribution</span></span>
<span id="cb15-50"><a href="truncated-triangular-distribution.html#cb15-50" aria-hidden="true" tabindex="-1"></a>  trun.tri.mean <span class="ot">&lt;-</span> <span class="cf">if</span> (a <span class="sc">&lt;=</span> b <span class="sc">&amp;</span> b <span class="sc">&lt;</span> M) {</span>
<span id="cb15-51"><a href="truncated-triangular-distribution.html#cb15-51" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-52"><a href="truncated-triangular-distribution.html#cb15-52" aria-hidden="true" tabindex="-1"></a>      (<span class="dv">2</span> <span class="sc">*</span> (<span class="sc">-</span><span class="dv">3</span> <span class="sc">*</span> L <span class="sc">*</span> ((b <span class="sc">^</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="dv">2</span> <span class="sc">-</span> (a <span class="sc">^</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">+</span> b <span class="sc">^</span> <span class="dv">3</span> <span class="sc">-</span> a <span class="sc">^</span> <span class="dv">3</span>)) <span class="sc">/</span> (<span class="dv">3</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (M <span class="sc">-</span> L))</span>
<span id="cb15-53"><a href="truncated-triangular-distribution.html#cb15-53" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-54"><a href="truncated-triangular-distribution.html#cb15-54" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-55"><a href="truncated-triangular-distribution.html#cb15-55" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="sc">/</span> result.denominator</span>
<span id="cb15-56"><a href="truncated-triangular-distribution.html#cb15-56" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&lt;</span> M <span class="sc">&amp;</span> b <span class="sc">&gt;=</span> M) {</span>
<span id="cb15-57"><a href="truncated-triangular-distribution.html#cb15-57" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-58"><a href="truncated-triangular-distribution.html#cb15-58" aria-hidden="true" tabindex="-1"></a>      (</span>
<span id="cb15-59"><a href="truncated-triangular-distribution.html#cb15-59" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span>M <span class="sc">^</span> <span class="dv">3</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">3</span> <span class="sc">*</span> U <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> L <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> U <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> M <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> L <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> U <span class="sc">+</span> L <span class="sc">*</span> M <span class="sc">^</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> M <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">3</span> <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> L <span class="sc">*</span> M <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> M <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> L <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">3</span></span>
<span id="cb15-60"><a href="truncated-triangular-distribution.html#cb15-60" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">/</span> (<span class="dv">3</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (M <span class="sc">-</span> L) <span class="sc">*</span> (U <span class="sc">-</span> M))</span>
<span id="cb15-61"><a href="truncated-triangular-distribution.html#cb15-61" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-62"><a href="truncated-triangular-distribution.html#cb15-62" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-63"><a href="truncated-triangular-distribution.html#cb15-63" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="sc">/</span> result.denominator</span>
<span id="cb15-64"><a href="truncated-triangular-distribution.html#cb15-64" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (M <span class="sc">&lt;=</span> a <span class="sc">&amp;</span> a <span class="sc">&lt;=</span> b) {</span>
<span id="cb15-65"><a href="truncated-triangular-distribution.html#cb15-65" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-66"><a href="truncated-triangular-distribution.html#cb15-66" aria-hidden="true" tabindex="-1"></a>      (<span class="dv">3</span> <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">2</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">3</span>) <span class="sc">/</span> (<span class="dv">3</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (U <span class="sc">-</span> M))</span>
<span id="cb15-67"><a href="truncated-triangular-distribution.html#cb15-67" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-68"><a href="truncated-triangular-distribution.html#cb15-68" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-69"><a href="truncated-triangular-distribution.html#cb15-69" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="sc">/</span> result.denominator</span>
<span id="cb15-70"><a href="truncated-triangular-distribution.html#cb15-70" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-71"><a href="truncated-triangular-distribution.html#cb15-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-72"><a href="truncated-triangular-distribution.html#cb15-72" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the median of the distribution</span></span>
<span id="cb15-73"><a href="truncated-triangular-distribution.html#cb15-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-74"><a href="truncated-triangular-distribution.html#cb15-74" aria-hidden="true" tabindex="-1"></a>  trun.tri.median <span class="ot">&lt;-</span> <span class="fu">inverse.cdf</span>(<span class="fl">0.5</span>)</span>
<span id="cb15-75"><a href="truncated-triangular-distribution.html#cb15-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-76"><a href="truncated-triangular-distribution.html#cb15-76" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the mode of the distribution</span></span>
<span id="cb15-77"><a href="truncated-triangular-distribution.html#cb15-77" aria-hidden="true" tabindex="-1"></a>  trun.tri.mode <span class="ot">&lt;-</span> <span class="cf">if</span> (a <span class="sc">&lt;=</span> b <span class="sc">&amp;</span> b <span class="sc">&lt;=</span> M) {</span>
<span id="cb15-78"><a href="truncated-triangular-distribution.html#cb15-78" aria-hidden="true" tabindex="-1"></a>    b</span>
<span id="cb15-79"><a href="truncated-triangular-distribution.html#cb15-79" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&lt;=</span> b <span class="sc">&amp;</span> b <span class="sc">&gt;=</span> M) {</span>
<span id="cb15-80"><a href="truncated-triangular-distribution.html#cb15-80" aria-hidden="true" tabindex="-1"></a>    M</span>
<span id="cb15-81"><a href="truncated-triangular-distribution.html#cb15-81" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&gt;=</span> M <span class="sc">&amp;</span> b <span class="sc">&gt;=</span> a) {</span>
<span id="cb15-82"><a href="truncated-triangular-distribution.html#cb15-82" aria-hidden="true" tabindex="-1"></a>    a</span>
<span id="cb15-83"><a href="truncated-triangular-distribution.html#cb15-83" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-84"><a href="truncated-triangular-distribution.html#cb15-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-85"><a href="truncated-triangular-distribution.html#cb15-85" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the upper bound of the distribution&#39;s domain</span></span>
<span id="cb15-86"><a href="truncated-triangular-distribution.html#cb15-86" aria-hidden="true" tabindex="-1"></a>  trun.tri.upper <span class="ot">&lt;-</span> b</span>
<span id="cb15-87"><a href="truncated-triangular-distribution.html#cb15-87" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-88"><a href="truncated-triangular-distribution.html#cb15-88" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the lower bound of the distribution&#39;s domain</span></span>
<span id="cb15-89"><a href="truncated-triangular-distribution.html#cb15-89" aria-hidden="true" tabindex="-1"></a>  trun.tri.lower <span class="ot">&lt;-</span> a</span>
<span id="cb15-90"><a href="truncated-triangular-distribution.html#cb15-90" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-91"><a href="truncated-triangular-distribution.html#cb15-91" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create a vector of length 1 that describes the variance of the distribution</span></span>
<span id="cb15-92"><a href="truncated-triangular-distribution.html#cb15-92" aria-hidden="true" tabindex="-1"></a>  trun.tri.var <span class="ot">&lt;-</span> <span class="cf">if</span> (a <span class="sc">&lt;=</span> b <span class="sc">&amp;</span> b <span class="sc">&lt;</span> M) {</span>
<span id="cb15-93"><a href="truncated-triangular-distribution.html#cb15-93" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-94"><a href="truncated-triangular-distribution.html#cb15-94" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">-</span><span class="dv">4</span> <span class="sc">*</span> L <span class="sc">*</span> ((b <span class="sc">^</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">3</span> <span class="sc">-</span> (a <span class="sc">^</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">3</span>) <span class="sc">+</span> b <span class="sc">^</span> <span class="dv">4</span> <span class="sc">-</span> a <span class="sc">^</span> <span class="dv">4</span>) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (M <span class="sc">-</span> L))</span>
<span id="cb15-95"><a href="truncated-triangular-distribution.html#cb15-95" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-96"><a href="truncated-triangular-distribution.html#cb15-96" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-97"><a href="truncated-triangular-distribution.html#cb15-97" aria-hidden="true" tabindex="-1"></a>    (result.numerator <span class="sc">/</span> result.denominator) <span class="sc">-</span> trun.tri.mean <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb15-98"><a href="truncated-triangular-distribution.html#cb15-98" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (a <span class="sc">&lt;</span> M <span class="sc">&amp;</span> b <span class="sc">&gt;=</span> M) {</span>
<span id="cb15-99"><a href="truncated-triangular-distribution.html#cb15-99" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-100"><a href="truncated-triangular-distribution.html#cb15-100" aria-hidden="true" tabindex="-1"></a>      (</span>
<span id="cb15-101"><a href="truncated-triangular-distribution.html#cb15-101" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span>M <span class="sc">^</span> <span class="dv">4</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">4</span> <span class="sc">*</span> U <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> L <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">3</span> <span class="sc">*</span> U <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> M <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">3</span> <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> L <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">3</span> <span class="sc">*</span> U <span class="sc">+</span> L <span class="sc">*</span> M <span class="sc">^</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> M <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">4</span> <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> L <span class="sc">*</span> M <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">3</span> <span class="sc">-</span> <span class="dv">3</span> <span class="sc">*</span> M <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> L <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">4</span></span>
<span id="cb15-102"><a href="truncated-triangular-distribution.html#cb15-102" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">/</span> (<span class="dv">6</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (M <span class="sc">-</span> L) <span class="sc">*</span> (U <span class="sc">-</span> M))</span>
<span id="cb15-103"><a href="truncated-triangular-distribution.html#cb15-103" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-104"><a href="truncated-triangular-distribution.html#cb15-104" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-105"><a href="truncated-triangular-distribution.html#cb15-105" aria-hidden="true" tabindex="-1"></a>    (result.numerator <span class="sc">/</span> result.denominator) <span class="sc">-</span> trun.tri.mean <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb15-106"><a href="truncated-triangular-distribution.html#cb15-106" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (M <span class="sc">&lt;=</span> a <span class="sc">&amp;</span> a <span class="sc">&lt;=</span> b) {</span>
<span id="cb15-107"><a href="truncated-triangular-distribution.html#cb15-107" aria-hidden="true" tabindex="-1"></a>    result.numerator <span class="ot">&lt;-</span></span>
<span id="cb15-108"><a href="truncated-triangular-distribution.html#cb15-108" aria-hidden="true" tabindex="-1"></a>      (<span class="dv">4</span> <span class="sc">*</span> (b <span class="sc">^</span> <span class="dv">3</span>) <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> (a <span class="sc">^</span> <span class="dv">3</span>) <span class="sc">*</span> U <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> b <span class="sc">^</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> a <span class="sc">^</span> <span class="dv">4</span>) <span class="sc">/</span> (<span class="dv">6</span> <span class="sc">*</span> (U <span class="sc">-</span> L) <span class="sc">*</span> (U <span class="sc">-</span> M))</span>
<span id="cb15-109"><a href="truncated-triangular-distribution.html#cb15-109" aria-hidden="true" tabindex="-1"></a>    result.denominator <span class="ot">&lt;-</span></span>
<span id="cb15-110"><a href="truncated-triangular-distribution.html#cb15-110" aria-hidden="true" tabindex="-1"></a>      orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(b) <span class="sc">-</span> orig.tri.dist<span class="sc">$</span><span class="fu">cdf</span>(a)</span>
<span id="cb15-111"><a href="truncated-triangular-distribution.html#cb15-111" aria-hidden="true" tabindex="-1"></a>    (result.numerator <span class="sc">/</span> result.denominator) <span class="sc">-</span> trun.tri.mean <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb15-112"><a href="truncated-triangular-distribution.html#cb15-112" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-113"><a href="truncated-triangular-distribution.html#cb15-113" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-114"><a href="truncated-triangular-distribution.html#cb15-114" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Build the list and return it. This list contains all major properties of the truncated triangular distribution</span></span>
<span id="cb15-115"><a href="truncated-triangular-distribution.html#cb15-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(</span>
<span id="cb15-116"><a href="truncated-triangular-distribution.html#cb15-116" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb15-117"><a href="truncated-triangular-distribution.html#cb15-117" aria-hidden="true" tabindex="-1"></a>      <span class="at">pdf =</span> pdf,</span>
<span id="cb15-118"><a href="truncated-triangular-distribution.html#cb15-118" aria-hidden="true" tabindex="-1"></a>      <span class="at">cdf =</span> cdf,</span>
<span id="cb15-119"><a href="truncated-triangular-distribution.html#cb15-119" aria-hidden="true" tabindex="-1"></a>      <span class="at">inverse.cdf =</span> inverse.cdf,</span>
<span id="cb15-120"><a href="truncated-triangular-distribution.html#cb15-120" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.mean =</span> trun.tri.mean,</span>
<span id="cb15-121"><a href="truncated-triangular-distribution.html#cb15-121" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.median =</span> trun.tri.median,</span>
<span id="cb15-122"><a href="truncated-triangular-distribution.html#cb15-122" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.mode =</span> trun.tri.mode,</span>
<span id="cb15-123"><a href="truncated-triangular-distribution.html#cb15-123" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.upper =</span> trun.tri.upper,</span>
<span id="cb15-124"><a href="truncated-triangular-distribution.html#cb15-124" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.lower =</span> trun.tri.lower,</span>
<span id="cb15-125"><a href="truncated-triangular-distribution.html#cb15-125" aria-hidden="true" tabindex="-1"></a>      <span class="at">trun.tri.var =</span> trun.tri.var</span>
<span id="cb15-126"><a href="truncated-triangular-distribution.html#cb15-126" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-127"><a href="truncated-triangular-distribution.html#cb15-127" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-128"><a href="truncated-triangular-distribution.html#cb15-128" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="triangular-distribution.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="simulation-and-validation-.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
